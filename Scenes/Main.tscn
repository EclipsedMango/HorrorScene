[gd_scene load_steps=10 format=3 uid="uid://clapenqe43n2g"]

[ext_resource type="Texture2D" uid="uid://kbevcyv5t7g7" path="res://Images/CheckeredPattern.png" id="1_2q4tk"]
[ext_resource type="PackedScene" uid="uid://d2oyjj2d3bk2b" path="res://Scenes/Player/Player.tscn" id="1_idj7w"]
[ext_resource type="PackedScene" uid="uid://yro3yrnh0ajp" path="res://Scenes/MonsterNPC.tscn" id="2_kln2b"]
[ext_resource type="PackedScene" uid="uid://sngm0uqfkv06" path="res://Scenes/Terrain/TestRoom.tscn" id="4_rgh2o"]

[sub_resource type="Environment" id="Environment_76we7"]
ambient_light_source = 1
ambient_light_energy = 0.0
tonemap_mode = 2
tonemap_exposure = 0.5
tonemap_white = 10.0
sdfgi_use_occlusion = true
sdfgi_cascades = 3
sdfgi_min_cell_size = 14.8525
sdfgi_cascade0_distance = 950.56
sdfgi_max_distance = 7604.48
sdfgi_energy = 0.0
glow_enabled = true
glow_intensity = 0.7
glow_strength = 0.6
glow_bloom = 1.0
glow_blend_mode = 0
glow_hdr_threshold = 1.2
glow_map_strength = 1.0
fog_enabled = true
fog_light_color = Color(0.273873, 0.273873, 0.273873, 1)
fog_light_energy = 0.12
fog_density = 0.02
volumetric_fog_density = 0.0184
volumetric_fog_albedo = Color(0.654232, 0.654232, 0.654232, 1)
volumetric_fog_emission_energy = 0.0
volumetric_fog_length = 1024.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_iydfj"]
shading_mode = 0
diffuse_mode = 3

[sub_resource type="NavigationMesh" id="NavigationMesh_idj7w"]
vertices = PackedVector3Array(-5.36054, 0.195, -8.45965, -5.36054, 0.195, -14.0596, -14.2605, 0.195, -14.0596, -14.2605, 0.195, -8.35965, -3.76054, 0.195, -14.0596, -3.76054, 0.195, -8.85965, 1.23946, 0.195, -8.85965, 1.23946, 0.195, -14.0596, 2.83946, 0.195, -14.0596, 2.83946, 0.195, -11.2596, 5.43946, 0.195, -11.2596, 5.43946, 0.195, -14.0596, 7.03946, 0.195, -14.0596, 7.03946, 0.195, -11.2596, 11.9395, 0.195, -11.2596, 11.9395, 0.195, -14.0596, 13.5395, 0.195, -14.0596, 13.5395, 0.195, -2.85965, 14.1395, 0.195, -2.85965, 14.1395, 0.195, -14.0596, 4.53946, 0.195, -5.95965, 4.63946, 0.195, -5.55965, 7.13946, 0.195, -5.55965, 2.83946, 0.195, -9.65965, 2.83946, 0.195, -6.35965, 3.23946, 0.195, -6.65965, 3.63946, 0.195, -6.65965, 7.13946, 0.195, -9.65965, 8.73946, 0.195, -9.65965, 8.73946, 0.195, -6.55965, 11.9395, 0.195, -6.55965, 11.9395, 0.195, -9.65965, 2.83946, 0.195, 3.94035, 2.43946, 0.195, -0.859649, 1.73946, 0.195, -0.759649, 2.63946, 0.195, 4.24035, -4.76054, 0.195, -7.25965, -5.36054, 0.195, -7.85965, 2.63946, 0.195, 4.84035, 1.23946, 0.195, -1.25965, -14.2605, 0.195, 4.74035, 1.23946, 0.195, -7.25965, 3.13946, 0.195, -4.45965, 2.83946, 0.195, -4.75965, 2.83946, 0.195, -1.95965, 3.63946, 0.195, -4.35965, 4.53946, 0.195, -5.15965, 7.13946, 0.195, -1.95965, 8.73946, 0.195, -4.95965, 8.73946, 0.195, -4.25965, 11.9395, 0.195, -4.25965, 11.9395, 0.195, -4.95965, 11.9395, 0.195, -1.75965, 11.9395, 0.195, -2.65965, 8.73946, 0.195, -2.65965, 8.63946, 0.195, -1.05965, 8.23946, 0.195, -0.759649, 7.53946, 0.195, -0.859649, 7.13946, 0.195, 4.34035, 12.2395, 0.195, -1.35965, 7.23946, 0.195, 4.64035, 14.1395, 0.195, 4.64035, 14.1395, 0.195, -1.25965, 4.83946, 0.195, 4.04035, 5.03946, 0.195, 4.64035, 5.63946, 0.195, 3.64035, 4.43946, 0.195, 3.74035, 3.13946, 0.195, 3.74035, 2.83946, 0.195, -1.25965, 7.23946, 0.195, -1.15965, 6.23946, 0.195, 3.64035, 6.83946, 0.195, 3.94035, 7.13946, 0.195, 5.04035, 6.53946, 0.195, 5.74035, 6.53946, 0.195, 14.1404, 14.1395, 0.195, 14.1404, 3.73946, 0.195, 14.1404, 3.73946, 0.195, 6.04035, 3.13946, 0.195, 6.04035, 2.73946, 0.195, 5.74035, -14.2605, 0.195, 14.1404, 5.73946, 0.195, 5.74035, 4.93946, 0.195, 4.94035, 4.93946, 0.195, 5.54035, 4.63946, 0.195, 5.94035)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(7, 6, 4), PackedInt32Array(4, 6, 5), PackedInt32Array(11, 10, 8), PackedInt32Array(8, 10, 9), PackedInt32Array(15, 14, 12), PackedInt32Array(12, 14, 13), PackedInt32Array(19, 18, 16), PackedInt32Array(16, 18, 17), PackedInt32Array(22, 21, 20), PackedInt32Array(25, 24, 23), PackedInt32Array(26, 25, 23), PackedInt32Array(20, 26, 22), PackedInt32Array(22, 26, 27), PackedInt32Array(27, 26, 23), PackedInt32Array(31, 30, 28), PackedInt32Array(28, 30, 29), PackedInt32Array(35, 34, 32), PackedInt32Array(32, 34, 33), PackedInt32Array(3, 37, 36), PackedInt32Array(35, 38, 34), PackedInt32Array(34, 38, 39), PackedInt32Array(39, 38, 36), PackedInt32Array(36, 38, 3), PackedInt32Array(3, 38, 40), PackedInt32Array(36, 41, 39), PackedInt32Array(3, 0, 37), PackedInt32Array(44, 43, 42), PackedInt32Array(44, 42, 45), PackedInt32Array(22, 46, 21), PackedInt32Array(45, 46, 44), PackedInt32Array(44, 46, 22), PackedInt32Array(44, 22, 47), PackedInt32Array(51, 50, 48), PackedInt32Array(48, 50, 49), PackedInt32Array(53, 52, 54), PackedInt32Array(54, 52, 55), PackedInt32Array(58, 57, 56), PackedInt32Array(52, 59, 55), PackedInt32Array(55, 59, 56), PackedInt32Array(58, 56, 60), PackedInt32Array(60, 56, 59), PackedInt32Array(60, 59, 62), PackedInt32Array(60, 62, 61), PackedInt32Array(64, 63, 65), PackedInt32Array(65, 63, 66), PackedInt32Array(65, 66, 67), PackedInt32Array(68, 44, 47), PackedInt32Array(47, 69, 68), PackedInt32Array(68, 69, 33), PackedInt32Array(33, 69, 65), PackedInt32Array(33, 65, 67), PackedInt32Array(33, 67, 32), PackedInt32Array(69, 70, 65), PackedInt32Array(69, 57, 70), PackedInt32Array(70, 57, 71), PackedInt32Array(57, 58, 71), PackedInt32Array(72, 60, 61), PackedInt32Array(72, 61, 73), PackedInt32Array(73, 61, 74), PackedInt32Array(74, 61, 75), PackedInt32Array(78, 77, 76), PackedInt32Array(78, 76, 79), PackedInt32Array(79, 76, 80), PackedInt32Array(79, 80, 40), PackedInt32Array(40, 38, 79), PackedInt32Array(83, 82, 81), PackedInt32Array(84, 83, 81), PackedInt32Array(84, 81, 73), PackedInt32Array(84, 73, 77), PackedInt32Array(77, 73, 76), PackedInt32Array(76, 73, 74)]
geometry_parsed_geometry_type = 1
cell_size = 0.1
cell_height = 0.1
agent_height = 0.1
agent_radius = 0.6
agent_max_climb = 0.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yrese"]
albedo_color = Color(0.408329, 0.408329, 0.408329, 1)
albedo_texture = ExtResource("1_2q4tk")
uv1_scale = Vector3(20, 20, 20)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_d0fcn"]
albedo_color = Color(0.462291, 0.462291, 0.462291, 1)

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_76we7")

[node name="Player" parent="." instance=ExtResource("1_idj7w")]
transform = Transform3D(-0.307624, 0, 0.394166, 0, 0.5, 0, -0.394166, 0, -0.307624, 187.193, 99.2447, -116.548)
max_stamina = 100.0

[node name="MonsterNPC" parent="." node_paths=PackedStringArray("target") instance=ExtResource("2_kln2b")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 207.482, 100.797, -133.843)
target = NodePath("../Player")

[node name="Map" type="Node3D" parent="."]
visible = false

[node name="Lights" type="Node3D" parent="Map"]

[node name="LightBulb" type="CSGSphere3D" parent="Map/Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.30665, 3.40032, 4.82022)
radius = 0.072481
material = SubResource("StandardMaterial3D_iydfj")

[node name="RoofLight1" type="SpotLight3D" parent="Map/Lights/LightBulb"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
light_volumetric_fog_energy = 16.0
shadow_enabled = true
distance_fade_begin = 1.35
distance_fade_length = 2326.93
spot_range = 5.06357
spot_angle = 42.9967
spot_angle_attenuation = 2.21914

[node name="LightBulb2" type="CSGSphere3D" parent="Map/Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.61546, 3.40032, -5.51561)
radius = 0.072481
material = SubResource("StandardMaterial3D_iydfj")

[node name="RoofLight1" type="SpotLight3D" parent="Map/Lights/LightBulb2"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
light_volumetric_fog_energy = 16.0
shadow_enabled = true
distance_fade_begin = 1.35
distance_fade_length = 2326.93
spot_range = 5.06357
spot_angle = 42.9967
spot_angle_attenuation = 2.21914

[node name="LightBulb3" type="CSGSphere3D" parent="Map/Lights"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.73596, 3.40032, 3.85679)
radius = 0.072481
material = SubResource("StandardMaterial3D_iydfj")

[node name="RoofLight1" type="SpotLight3D" parent="Map/Lights/LightBulb3"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
light_volumetric_fog_energy = 16.0
shadow_enabled = true
distance_fade_begin = 1.35
distance_fade_length = 2326.93
spot_range = 5.06357
spot_angle = 67.5
spot_angle_attenuation = 2.21914

[node name="NavMesh" type="NavigationRegion3D" parent="Map"]
navigation_mesh = SubResource("NavigationMesh_idj7w")

[node name="Ground" type="CSGBox3D" parent="Map/NavMesh"]
use_collision = true
size = Vector3(30, 0.01, 30)
material = SubResource("StandardMaterial3D_yrese")

[node name="OuterWalls" type="Node3D" parent="Map/NavMesh"]

[node name="WallNorth" type="CSGBox3D" parent="Map/NavMesh/OuterWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.065485, 1.75, -14.9377)
use_collision = true
size = Vector3(30.7399, 3.5, 0.401563)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="WallEast" type="CSGBox3D" parent="Map/NavMesh/OuterWalls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 14.9856, 1.75, 0.00624466)
use_collision = true
size = Vector3(30.3736, 3.5, 0.317578)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="WallSouth" type="CSGBox3D" parent="Map/NavMesh/OuterWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0850415, 1.75, 14.9998)
use_collision = true
size = Vector3(31.0912, 3.5, 0.356519)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="WallWest" type="CSGBox3D" parent="Map/NavMesh/OuterWalls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -15.0862, 1.75, 0.192703)
use_collision = true
size = Vector3(30.9047, 3.5, 0.423535)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="InnerWalls" type="Node3D" parent="Map/NavMesh"]

[node name="Wall4" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.7432, 1.75, -8.52742)
use_collision = true
size = Vector3(0.276913, 3.5, 13.2723)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall7" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.24676, 1.75, -12.7032)
use_collision = true
size = Vector3(0.276913, 3.5, 4.78065)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall12" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.9754, 1.75, -5.94479)
use_collision = true
size = Vector3(0.276913, 3.5, 9.13459)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall17" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.05994, 1.75, -4.79689)
use_collision = true
size = Vector3(0.276913, 3.5, 6.83878)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall11" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.24676, 1.75, -12.7032)
use_collision = true
size = Vector3(0.276913, 3.5, 4.78065)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall8" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.04042, 1.75, -11.5144)
use_collision = true
size = Vector3(0.276913, 3.5, 7.06696)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall10" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.53534, 1.75, -11.5144)
use_collision = true
size = Vector3(0.276913, 3.5, 7.06696)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall6" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 7.40149, 1.75, -10.4214)
use_collision = true
size = Vector3(0.276913, 3.5, 10.8582)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall13" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10.3338, 1.75, -5.75009)
use_collision = true
size = Vector3(0.276913, 3.5, 4.99353)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall14" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 13.8499, 1.75, -2.02672)
use_collision = true
size = Vector3(0.276913, 3.5, 2.48605)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall9" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -1.22057, 1.75, -8.08375)
use_collision = true
size = Vector3(0.276913, 3.5, 6.83979)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Wall15" type="CSGBox3D" parent="Map/NavMesh/InnerWalls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10.2831, 1.75, -3.4346)
use_collision = true
size = Vector3(0.276913, 3.5, 4.80419)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="Boxes" type="Node3D" parent="Map/NavMesh"]

[node name="CSGBox3D" type="CSGBox3D" parent="Map/NavMesh/Boxes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.765, 0.5, 4.855)
use_collision = true

[node name="CSGBox3D2" type="CSGBox3D" parent="Map/NavMesh/Boxes"]
transform = Transform3D(0.582364, 0, 0.812928, 0, 1, 0, -0.812928, 0, 0.582364, 6.10456, 0.341309, 4.71391)
use_collision = true
size = Vector3(0.684204, 0.682617, 0.688965)

[node name="CSGBox3D3" type="CSGBox3D" parent="Map/NavMesh/Boxes"]
transform = Transform3D(-0.755579, 0, 0.655057, 0, 1, 0, -0.655057, 0, -0.755579, 3.47211, 0.341309, -5.53107)
use_collision = true
size = Vector3(0.684204, 0.682617, 0.688965)

[node name="Roof" type="CSGBox3D" parent="Map"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.69672, 0)
visible = false
use_collision = true
size = Vector3(30, 0.403, 30)
material = SubResource("StandardMaterial3D_d0fcn")

[node name="TestRoom" parent="." instance=ExtResource("4_rgh2o")]
